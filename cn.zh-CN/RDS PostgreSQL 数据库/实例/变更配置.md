# 变更配置

本文介绍如何变更实例的规格和存储空间。

您的阿里云账号没有未支付的续费订单。

## 变更项

如您需要横向扩展数据库的读取能力，请参见[PostgreSQL只读实例简介](/cn.zh-CN/RDS PostgreSQL 数据库/只读实例/PostgreSQL只读实例简介.md)和[创建PostgreSQL只读实例](/cn.zh-CN/RDS PostgreSQL 数据库/只读实例/创建PostgreSQL只读实例.md)，通过只读实例来分担主实例的压力。

|变更项|说明|
|---|--|
|系列|支持[PostgreSQL基础版升级高可用版](/cn.zh-CN/RDS PostgreSQL 数据库/升级版本/PostgreSQL基础版升级高可用版.md)。|
|规格|所有实例类型都支持变更规格。 |
|存储空间|所有实例都支持增加存储空间。

仅[续费变配](/cn.zh-CN/云数据库 RDS 价格/续费.md)时，基于本地盘的包年包月实例可以降低存储空间。

**说明：**

-   增加或降低存储空间时不能超过该规格的存储空间限制，详情请参见[主实例规格列表](/cn.zh-CN/云数据库 RDS 简介/产品规格/主实例规格列表.md)。
-   基于云盘的实例无法降低存储空间。
-   若当前规格对应的存储空间范围无法满足您的需求，请选择其它实例规格。 |

**说明：** 变更上述配置不会导致实例连接地址的改变。

## 计费规则

请参见[变配的计费规则](/cn.zh-CN/云数据库 RDS 价格/变配.md)。

## 注意事项

-   变更配置可能会进行数据迁移，迁移完成后根据您选择的切换时间进行切换（期间保持增量同步），切换过程中会出现一次约30秒的闪断，而且与数据库、账号、网络等相关的大部分操作都无法执行，请尽量在业务低峰期执行变配操作，或确保您的应用有自动重连机制。

    **说明：** ESSD云盘实例增加存储空间不会闪断。

-   变更配置后无需您手动重启实例。
-   由于基础版只有一个数据库节点，没有备节点作为热备份，因此当该节点意外宕机或者执行变更配置、版本升级等任务时，会出现较长时间的不可用。如果业务对数据库的可用性要求较高，不建议使用基础版，可选择其他系列（如高可用版）。

## 操作步骤

**说明：** 如果您的PostgreSQL 10/11高可用版（云盘）页面和该操作步骤内的描述不一致，请参见下方[PostgreSQL 10/11高可用版（云盘）临时控制台操作步骤](#section_a6l_atw_yqh)。

1.  登录[RDS管理控制台](https://rds.console.aliyun.com/)。

2.  在左侧单击**实例列表**，然后在上方选择实例所在地域。

    ![选择地域](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3074469951/p36543.png)

3.  找到目标实例，单击实例ID。

4.  单击**变更配置**。

    ![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/8867559951/p11174.png)

5.  （仅包年包月实例需要执行此步骤）在弹出的对话框中，选择变更方式，单击**下一步**。

    **说明：** 变更方式说明如下：

    -   立即升降配

        变配后，新的配置立即生效。包年包月实例和按量付费实例都支持立即升降配。

    -   续费时升降配

        是指对实例进行续费，并在续费时变更实例配置。仅包年包月实例支持续费时升降配，新的配置将在下一计费周期生效。例如，包月实例到期时间为2018年6月20日，您在2018年5月10日进行了实例的续费和升配的操作，则该续费和升配会在2018年6月20日生效。

    变更任务下达后，系统将磁盘数据同步到一个新实例，然后根据**立即升降配**或**续费时升降配**确定时间，到时间后系统将老实例的实例ID和连接地址等信息切换到新实例。

    ![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9867559951/p7047.png)

6.  修改实例的配置。详情请参见[变更项](#section_zlk_qvz_z2b)。

7.  选择变更实例配置的执行时间。

    -   **数据迁移结束后立即切换**：变更实例配置会涉及到底层的数据迁移，您可以选择在数据迁移后立即切换。
    -   **可维护时间内进行切换**：在变更配置生效期间，可能会出现一次约30秒的闪断，而且与数据库、账号、网络等相关的大部分操作都无法执行，因此您可以选择在[可维护时间段](/cn.zh-CN/RDS PostgreSQL 数据库/实例/设置可维护时间段.md)内执行切换的操作。
8.  勾选服务协议，单击**去支付**，并完成支付。


## PostgreSQL 10/11高可用版（云盘）临时控制台操作步骤

1.  登录[PostgreSQL临时控制台](https://postgresql.console.aliyun.com/)。
2.  在页面左上角，选择实例所在地域。

    ![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/5777559951/p49697.png)

3.  找到目标实例，选择右侧**⋮** \> **变配**。

    ![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9867559951/p49713.png)

4.  修改**数据库规格**和**存储空间**。
5.  勾选服务协议，单击**去开通**并完成支付。

## 常见问题

1.  存储类型（本地SSD盘、SSD云盘和ESSD云盘）如何变更？

    答：请参见[云盘如何变更为本地盘](/cn.zh-CN/常见问题/购买/付费/云盘如何变更为本地盘.md)。

2.  仅扩容存储空间，需要迁移数据到新实例吗？

    答：需要检查实例所在主机上是否有足够存储空间用于扩容。如果有则直接扩容，不需要迁移数据；如果没有，则需要迁移数据到拥有足够存储空间的主机上。


## 相关API

|API|描述|
|---|--|
|[ModifyDBInstanceSpec](/cn.zh-CN/API 参考/实例/变更实例.md)|变更RDS实例规格|

