# 变更配置

本文介绍如何变更RDS MySQL实例，包括系列、规格、存储空间等。

-   您的阿里云账号没有未支付的续费订单。
-   实例引擎为MySQL。

**说明：**

其他引擎变更配置请参见：

-   [SQL Server变更配置](/cn.zh-CN/RDS SQL Server 数据库/实例/变更配置.md)
-   [PostgreSQL变更配置](/cn.zh-CN/RDS PostgreSQL 数据库/实例/变更配置.md)
-   [PPAS变更配置](/cn.zh-CN/RDS PPAS 数据库/实例/变更配置.md)
-   [MariaDB变更配置](/cn.zh-CN/RDS MariaDB TX 数据库/实例/变更配置.md)

## 变更项

|变更项|说明|变更方法|计费|
|---|--|----|--|
|系列|当前仅支持如下系列的变更：

-   MySQL 5.6：三节点企业版变更为高可用版。
-   MySQL 5.7：基础版变更为高可用版，或高可用版变更为三节点企业版。变更后无法回退。

|参见本文[操作步骤](#section_ky2_tnw_b2b)|参见[变配](/cn.zh-CN/云数据库 RDS 价格/变配.md)|
|规格|所有实例类型都支持变更规格。|
|存储空间|所有实例都支持增加存储空间。 **说明：**

-   增加存储空间时不能超过该规格的存储空间限制，详情请参见[主实例规格列表](/cn.zh-CN/云数据库 RDS 简介/产品规格/主实例规格列表.md)。
-   实例无法降低存储空间。
-   云盘实例支持在线增加存储空间，不会闪断。
-   若当前规格对应的存储空间范围无法满足您的需求，请选择其它实例规格。 |
|存储类型|MySQL 5.7基础版变更为高可用版时，存储类型可以由SSD云盘变更为本地SSD盘。|
|可用区|实例可以迁移至同一地域内的其它可用区。迁移可用区后，实例的所有属性、配置和连接地址都不会改变。

MySQL 5.7从高可用版升级到三节点企业版（原金融版）时，需要变更实例所在的可用区。详情请参见本文[操作步骤](#section_ky2_tnw_b2b)。

**说明：** 迁移可用区需要迁移数据，数据量越大，所需时间越长。

|[迁移可用区](/cn.zh-CN/RDS MySQL 数据库/变更实例/迁移可用区.md)|免费|
|主备切换|实例可以设置自动切换或手动切换主备实例，切换后原来的主实例会变成备实例。|[自动或手动主备切换](/cn.zh-CN/RDS MySQL 数据库/变更实例/自动或手动主备切换.md)|
|网络类型|所有实例都支持专有网络，部分实例同时支持经典网络。对于同时支持两种网络类型的实例，您可以切换网络类型。|[切换网络类型](/cn.zh-CN/RDS MySQL 数据库/数据库连接/切换网络类型.md)|
|专有网络和虚拟交换机|部分实例支持切换专有网络VPC和虚拟交换机。|[切换专有网络VPC和虚拟交换机](/cn.zh-CN/RDS MySQL 数据库/数据库连接/切换专有网络VPC和虚拟交换机.md)|
|可维护时间段|实例可以修改可维护时间段。|[设置可维护时间段](/cn.zh-CN/RDS MySQL 数据库/变更实例/设置可维护时间段.md)|
|数据复制方式|修改主备实例之间的数据复制方式，可以提高数据库可用性。|[修改数据复制方式](/cn.zh-CN/RDS MySQL 数据库/变更实例/修改数据复制方式.md)|
|实例参数|修改实例的部分参数值，可以更适应业务需求。|[设置实例参数](/cn.zh-CN/RDS MySQL 数据库/实例参数/参数模板/设置实例参数.md)或[使用参数模板](/cn.zh-CN/RDS MySQL 数据库/实例参数/参数模板/使用参数模板.md)|
|引擎版本|当前仅支持从MySQL 5.5升级到MySQL 5.6。|[升级数据库版本](/cn.zh-CN/RDS MySQL 数据库/升级版本/升级数据库版本.md)|
|付费方式|实例的计费方式可以在按量付费和包年包月之间切换。 **说明：** 只读实例只能按量付费，不支持转变成包年包月。

|[按量付费转包年包月](/cn.zh-CN/RDS MySQL 数据库/变更实例/按量付费转包年包月.md)[包年包月转按量付费](t1874750.md#)

|参见[价格、收费项与计费方式](/cn.zh-CN/云数据库 RDS 价格/价格、收费项与计费方式.md)|
|地域|实例的地域无法变更，您可以在目标地域创建实例后，通过数据传输服务DTS迁移数据，然后修改业务连接地址，确认业务正常后[释放原实例](/cn.zh-CN/RDS MySQL 数据库/实例生命周期/释放实例.md)。|[迁移数据](/cn.zh-CN/RDS MySQL 数据库/数据迁移/RDS实例间数据迁移.md)|[新购实例费用](/cn.zh-CN/云数据库 RDS 价格/价格、收费项与计费方式.md)以及[DTS增量同步期间费用](/cn.zh-CN/产品定价/产品定价.md)|

**说明：**

-   变更上述配置不会导致实例连接地址的改变。
-   如您需要横向扩展数据库的读取能力，可以[创建MySQL只读实例](/cn.zh-CN/RDS MySQL 数据库/只读实例/创建MySQL只读实例.md)，通过只读实例来分担主实例的压力。

## 计费规则

请参见[变配的计费规则](/cn.zh-CN/云数据库 RDS 价格/变配.md)。

## 注意事项

-   变更配置可能会进行数据迁移，迁移完成后根据您选择的切换时间进行切换（期间保持增量同步），切换过程中会出现一次约30秒的闪断，而且与数据库、账号、网络等相关的大部分操作都无法执行，请尽量在业务低峰期执行变配操作，或确保您的应用有自动重连机制。

    **说明：** 云盘实例增加存储空间不会闪断。

-   变更配置后无需您手动重启实例。
-   由于基础版只有一个数据库节点，没有备节点作为热备份，因此当该节点意外宕机或者执行变更配置、版本升级等任务时，会出现较长时间的不可用。如果业务对数据库的可用性要求较高，不建议使用基础版，可选择其他系列（如高可用版）。

## 操作步骤

**说明：** 下文仅介绍如何变更实例的系列、规格、存储空间、存储类型，其他变更（如网络类型）请参见[变更项](#section_zlk_qvz_z2b)。

1.  登录[RDS管理控制台](https://rds.console.aliyun.com/)。

2.  在左侧单击**实例列表**，然后在上方选择实例所在地域。

    ![选择地域](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/3074469951/p36543.png)

3.  找到目标实例，单击实例ID。

4.  在**配置信息**区域单击**变更配置**。

5.  （仅包年包月实例需要执行此步骤）在弹出的对话框中，选择变更方式，单击**下一步**。

    **说明：** 变更方式说明如下：

    -   **立即升级配置** 或**立即降低配置**

        变配后，新的配置立即生效。包年包月实例和按量付费实例都支持立即升降配。

    -   **续费降配/续费升配**

        是指对实例进行续费，并在续费时变更实例配置。仅包年包月实例支持续费时升降配，新的配置将在下一计费周期生效。例如，包月实例到期时间为2018年6月20日，您在2018年5月10日进行了实例的续费和升配的操作，则该续费和升配会在2018年6月20日生效。

    变更任务下达后，系统将磁盘数据同步到一个新实例，然后根据**立即升降配**或**续费时升降配**确定时间，到时间后系统将老实例的实例ID和连接地址等信息切换到新实例。

    ![](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/9867559951/p7047.png)

6.  修改实例的配置。详情请参见[变更项](#section_zlk_qvz_z2b)。

7.  选择**切换时间**。

    -   **数据迁移结束后立即切换**：变更实例配置会涉及到底层的数据迁移，您可以选择在数据迁移后立即切换。
    -   **可维护时间内进行切换**：在变更配置生效期间，可能会出现一次约30秒的闪断，而且与数据库、账号、网络等相关的大部分操作都无法执行，因此您可以选择在[可维护时间段](/cn.zh-CN/RDS MySQL 数据库/变更实例/设置可维护时间段.md)内执行切换的操作。
8.  勾选服务协议，单击**去支付**，并完成支付。


## 常见问题

-   存储类型（本地SSD盘、SSD云盘和ESSD云盘）如何变更？

    请参见[云盘如何变更为本地盘](/cn.zh-CN/常见问题/购买/付费/云盘如何变更为本地盘.md)。

-   升级存储空间，一直显示库存不足，怎么办？

    您可以[迁移可用区](/cn.zh-CN/RDS MySQL 数据库/变更实例/迁移可用区.md)后再升级存储空间。迁移可用区不会改变连接地址，但是地址对应的IP会改变，建议应用程序设置自动重连。

-   仅扩容存储空间，需要迁移数据到新实例吗？

    需要检查实例所在主机上是否有足够存储空间用于扩容。如果有则直接扩容，不需要迁移数据；如果没有，则需要同步数据到拥有足够存储空间的主机上，同步过程不会影响您使用实例，仅在同步成功后切换时出现约30秒的闪断。

-   升级主实例配置时，只读实例的配置是否会自动升级？

    只读实例不会自动升级，需要您手动升级。

-   变更配置时，是否会影响线上业务？

    在升级过程中，仅在切换时会发生30秒闪断。

-   变更配置后，实例的地址会变化吗？

    [内网/外网地址](/cn.zh-CN/RDS MySQL 数据库/数据库连接/查看或修改内外网地址和端口.md)和[读写分离地址](/cn.zh-CN/RDS MySQL 数据库/数据库代理（读写分离）/共享代理（下线中）/开通读写分离（共享代理）.md)不会改变，但是对应的IP地址可能会变化。建议您在应用程序中使用内网/外网地址或读写分离地址。


## 相关API

|API|描述|
|---|--|
|[ModifyDBInstanceSpec](/cn.zh-CN/API 参考/实例/变更实例.md)|变更RDS实例规格|

